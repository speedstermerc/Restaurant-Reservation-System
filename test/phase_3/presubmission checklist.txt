fix Tags

check for edge cases

update diagrams